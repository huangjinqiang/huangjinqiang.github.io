---
title: 传递信息[leetcode]
date: 2021-07-01
tags:
  - leetcode
  - 图
categories:
  - leetcode
permalink: /leetcode/lcp/07
---

[传递信息](https://leetcode-cn.com/problems/chuan-di-xin-xi/)

### 题意
* 给定n个点，每俩个点的路径（单向可达）及步数k
* 要求从 0 出发，k步恰好走到 n-1 ，有多少种走法

### 准备
* 路径是单向的，先弄个有向图出来，用来步进

```js
/**
 * @param {number[][]} relation
 * @return {object}
 */
function getMap(relation) {
  return relation.reduce((map, [from, to]) => {
    if (map[from]) {
      map[from].push(to)
    } else {
      map[from] = [to]
    }
    return map
  }, {})
}
```

### 分析
* 要求k步从 0 走到 n-1，就是算下 k-1 步能走到哪些点，这些点再走一步就能到 n-1

```js
/**
 * @param {number} n
 * @param {number[][]} relation
 * @param {number} k
 * @return {number}
 */
var numWays = function(n, relation, k) {
  const map = getMap(relation)
  const from = 0
  const to = n - 1

  // k - 1步能到哪些点
  let list = [from]
  while (k > 1) {
    list = list.reduce((list, curr) => {
      if (map[curr]) {
        list.push(...map[curr])
      }

      return list
    }, [])
    k -= 1
  }

  // 这些点中哪些再走一步能到 n-1
  return list.reduce((num, curr) => {
    if (map[curr] && map[curr].includes(to)) {
      return num + 1
    }

    return num
  }, 0)
};
```
